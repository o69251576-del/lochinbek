<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ultimate Timer App</title>

<meta name="description" content="Ultimate Online Timer, Stopwatch and Countdown">
<meta name="keywords" content="timer, stopwatch, countdown, online timer">
<meta name="author" content="Ozodbek">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="https://cdn-icons-png.flaticon.com/512/992/992700.png">

<style>
body{
  font-family:Arial;
  background:#eaeaea;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  transition:.3s;
}
body.dark{background:#111;color:#fff}

.app{
  background:#fff;
  padding:20px;
  width:340px;
  border-radius:16px;
  text-align:center;
  box-shadow:0 0 20px rgba(0,0,0,.3);
}
body.dark .app{background:#1e1e1e}

img{width:60px}
h1{font-size:30px;margin:10px}
small{font-size:12px}

input,button,select{
  margin:4px;
  padding:6px;
}

progress{width:100%;height:10px}

ul{
  max-height:80px;
  overflow:auto;
  padding:0;
}
li{
  list-style:none;
  font-size:13px;
}

.run{animation:pulse 1s infinite}
@keyframes pulse{
  0%{transform:scale(1)}
  50%{transform:scale(1.05)}
  100%{transform:scale(1)}
}
</style>
</head>

<body>

<div class="app" id="box">
  <img src="https://cdn-icons-png.flaticon.com/512/992/992700.png">

  <div id="clock"></div>
  <small id="date"></small>

  <h1 id="time">00:00:00.0</h1>
  <progress id="bar" value="0" max="60"></progress>

  <div>
    <input id="min" type="number" placeholder="Min">
    <input id="sec" type="number" placeholder="Sec">
  </div>

  <div>
    <button onclick="start()">Start</button>
    <button onclick="stop()">Stop</button>
    <button onclick="reset()">Reset</button>
    <button onclick="lap()">Lap</button>
  </div>

  <div>
    <select onchange="theme(this.value)">
      <option>Theme</option>
      <option value="#2196f3">Blue</option>
      <option value="#4caf50">Green</option>
      <option value="#ff5722">Orange</option>
    </select>
    <button onclick="toggle()">ðŸŒ™</button>
    <button onclick="sound=!sound">ðŸ””</button>
  </div>

  <div>Laplar: <span id="count">0</span></div>
  <ul id="laps"></ul>
</div>

<audio id="alarm">
  <source src="https://www.soundjay.com/buttons/sounds/beep-07.mp3">
</audio>

<script>
let t=null,ms=0,s=0,m=0,cd=false,sound=true;

function save(){
 localStorage.setItem("timer",JSON.stringify({ms,s,m,cd}));
}
function load(){
 let d=JSON.parse(localStorage.getItem("timer"));
 if(!d)return;
 ms=d.ms;s=d.s;m=d.m;cd=d.cd;draw();
}
load();

function draw(){
 time.innerText=
 String(m).padStart(2,'0')+":"+
 String(s).padStart(2,'0')+"."+Math.floor(ms/100);
 bar.value=s;
 save();
}

function tick(){
 ms+=100;
 if(ms==1000){
  ms=0;
  if(cd){
   if(m==0&&s==0){
    if(sound) alarm.play();
    stop(); return;
   }
   if(s==0){m--;s=59}else s--;
  }else{
   s++; if(s==60){s=0;m++}
  }
 }
 draw();
}

function start(){
 if(t)return;
 let im=min.value,is=sec.value;
 if(im||is){m=+im||0;s=+is||0;cd=true;min.value=sec.value=""}
 t=setInterval(tick,100);
 box.classList.add("run");
}

function stop(){
 clearInterval(t);t=null;
 box.classList.remove("run");
}

function reset(){
 stop();ms=s=m=0;cd=false;
 laps.innerHTML="";count.innerText=0;
 localStorage.clear();draw();
}

function lap(){
 let li=document.createElement("li");
 li.textContent=time.innerText;
 laps.appendChild(li);
 count.innerText=laps.children.length;
}

function toggle(){document.body.classList.toggle("dark")}
function theme(c){box.style.borderColor=c}

// real clock
setInterval(()=>{
 let d=new Date();
 clock.innerText=d.toLocaleTimeString();
 date.innerText=d.toDateString();
},1000);

// keyboard
document.addEventListener("keydown",e=>{
 if(e.code=="Space") t?stop():start();
 if(e.key=="r") reset();
 if(e.key=="l") lap();
});
</script>

</body>
</html>
